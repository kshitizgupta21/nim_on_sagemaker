<html><head><style>body {
   color: black;
}
</style></head><body><h2 id="steps-for-running-on-sagemaker">Steps for running on sagemaker</h2>
<h3 id="1-build-docker">1. Build docker</h3>
<pre><code><span class="hljs-meta"># authenticate</span>
docker login nvcr.io
<span class="hljs-meta"># username is $oauthtoken</span>
<span class="hljs-meta"># password is NGC API Key</span>
</code></pre><p>Then build docker</p>
<pre><code><span class="hljs-keyword">cd</span> final_docker
bash build_docker.<span class="hljs-keyword">sh</span>
</code></pre><h3 id="2-tag-and-push-to-ecr">2. Tag and push to ECR</h3>
<pre><code><span class="hljs-function"><span class="hljs-title">cd</span></span> ../
bash push_ecr.sh
</code></pre><h3 id="3-download-the-model-from-ngc">3. Download the model from NGC</h3>
<p>Might have to install ngc-cli</p>
<pre><code>wget --content-disposition https://api.ngc.nvidia.com/v2/resources/nvidia/ngc-apps/ngc_cli/versions/<span class="hljs-number">3.39</span><span class="hljs-meta">.0</span>/zip -O ngc_cli_3<span class="hljs-meta">.39</span><span class="hljs-meta">.0</span>.zip
unzip ngc_cli_3<span class="hljs-meta">.39</span><span class="hljs-meta">.0</span>.zip
unzip ngccli_linux.zip
chmod u+x ngc-<span class="hljs-keyword">cli</span>
export PATH=$PATH:ngc-<span class="hljs-keyword">cli</span>
</code></pre><p>Set up ngc config</p>
<pre><code>ngc config <span class="hljs-keyword">set</span>
</code></pre><p>Might have to select <code>nvidian/nemo-llm</code> as the org and team</p>
<p>Here we download LLama-2-7B engine for 1-A100 GPU</p>
<pre><code>ngc registry model download-version "nvidian/nemo-llm/llama<span class="hljs-string">-2</span><span class="hljs-string">-7</span>b-chat:LLAMA<span class="hljs-string">-2</span><span class="hljs-string">-7</span>B-CHAT<span class="hljs-string">-4</span>K-FP16<span class="hljs-string">-1</span>-A100.24.02.rc2
</code></pre><h3 id="4-run-through-the-notebook-to-create-sm-endpoint">4. Run through the notebook to create SM endpoint</h3>
<p>Run <code>nim_sm_prebuilt_a100.ipynb</code> notebook as SageMaker notebook instance on <code>g5.xlarge</code> instance</p>
</body></html>